components:
  schemas:
    OrderSide:
      type: string
      enum: [buy, sell]

    OrderType:
      type: string
      enum: [limit, market]

    TimeInForce:
      type: string
      enum: [GTC, IOC, FOK] # Good-Til-Cancelled, Immediate-Or-Cancel, Fill-Or-Kill

    CreateOrderRequest:
      type: object
      properties:
        symbol:
          type: string
          example: "BTC-THB"
        side:
          $ref: '#/components/schemas/OrderSide'
        type:
          $ref: '#/components/schemas/OrderType'
        price:
          type: string
          description: "Decimal price as string (required for limit orders)"
        quantity:
          type: string
          description: "Decimal quantity as string"
        time_in_force:
          $ref: '#/components/schemas/TimeInForce'
        post_only:
          type: boolean
          description: "Reject if would match immediately"
        metadata:
          type: object
          additionalProperties: true
      required: [symbol, side, type, quantity]

    CreateOrderResponse:
      type: object
      properties:
        order_id:
          type: string
          format: uuid
        client_order_id:
          type: string
        status:
          type: string
          enum: [pending, accepted, rejected]
        message:
          type: string
      required: [order_id, status]

    OrderFill:
      type: object
      properties:
        fill_id:
          type: string
        price:
          type: string
        quantity:
          type: string
        fee:
          type: string
        timestamp:
          type: string
          format: date-time

    Order:
      type: object
      properties:
        order_id:
          type: string
          format: uuid
        client_order_id:
          type: string
          nullable: true
        symbol:
          type: string
        side:
          $ref: '#/components/schemas/OrderSide'
        type:
          $ref: '#/components/schemas/OrderType'
        price:
          type: string
          nullable: true
        quantity:
          type: string
        filled_quantity:
          type: string
        remaining_quantity:
          type: string
        status:
          type: string
          enum: [pending, open, partially_filled, filled, cancelled, rejected]
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
        fills:
          type: array
          items:
            $ref: '#/components/schemas/OrderFill'
        metadata:
          type: object
          additionalProperties: true
      required: [order_id, symbol, side, type, quantity, status, created_at]

    OrderList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: '#/components/schemas/Order'
        pagination:
          $ref: './schemas.yaml#/components/schemas/Pagination'

    CancelOrderRequest:
      type: object
      properties:
        client_cancel_id:
          type: string
        reason:
          type: string

    CancelOrderResponse:
      type: object
      properties:
        order_id:
          type: string
        status:
          type: string
        message:
          type: string
